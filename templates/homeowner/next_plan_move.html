{% extends "homeowner/layout.html" %}
{% block title %}Plan My Next Move{% endblock %}

{% block homeowner_content %}
<style>
  /* Page Container - Centered */
  .questionnaire-page {
    max-width: 1000px;
    margin: 0 auto;
    padding: 0 1rem;
    width: 100%;
    box-sizing: border-box;
  }
  
  .questionnaire-section {
    background: white;
    border-radius: 12px;
    padding: 2.5rem;
    margin-bottom: 2rem;
    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
    border: 1px solid rgba(200, 180, 151, 0.2);
  }
  
  .questionnaire-section h2 {
    font-family: var(--font-heading);
    font-size: 1.8rem;
    color: var(--olive-green);
    margin-bottom: 1.5rem;
    font-weight: 400;
    border-bottom: 2px solid var(--taupe-beige);
    padding-bottom: 0.75rem;
    text-align: center;
  }
  
  .form-group {
    margin-bottom: 1.8rem;
  }
  
  .form-group label {
    display: block;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--olive-green);
    text-transform: uppercase;
    letter-spacing: 0.03em;
    margin-bottom: 0.5rem;
  }
  
  .form-group input[type="text"],
  .form-group input[type="email"],
  .form-group input[type="tel"],
  .form-group input[type="date"],
  .form-group textarea,
  .form-group select {
    width: 100%;
    padding: 0.9rem 1.1rem;
    border: 2px solid var(--taupe-beige);
    border-radius: 8px;
    font-size: 1rem;
    color: var(--charcoal-brown);
    background: white;
    transition: all 0.3s ease;
    font-family: inherit;
    box-sizing: border-box;
  }
  
  .form-group input:focus,
  .form-group textarea:focus,
  .form-group select:focus {
    outline: none;
    border-color: var(--olive-green);
    box-shadow: 0 0 0 4px rgba(107, 106, 69, 0.1);
    transform: translateY(-1px);
  }
  
  .form-group textarea {
    resize: vertical;
    min-height: 80px;
    line-height: 1.6;
  }
  
  .radio-group {
    display: flex;
    gap: 2rem;
    flex-wrap: wrap;
    justify-content: center;
  }
  
  .radio-group label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    font-size: 0.95rem;
    text-transform: none;
    font-weight: 400;
    color: var(--charcoal-brown);
    padding: 0.5rem 1rem;
    border-radius: 6px;
    transition: all 0.2s ease;
  }
  
  .radio-group label:hover {
    background: rgba(107, 106, 69, 0.05);
  }
  
  .radio-group input[type="radio"] {
    width: 20px;
    height: 20px;
    margin: 0;
    cursor: pointer;
  }
  
  .submit-button {
    background: linear-gradient(135deg, var(--olive-green) 0%, #5A6D47 100%);
    color: white;
    padding: 1.2rem 3rem;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    cursor: pointer;
    transition: all 0.3s ease;
    margin: 2rem auto 0;
    display: block;
    box-shadow: 0 4px 12px rgba(107, 106, 69, 0.3);
  }
  
  .submit-button:hover {
    background: linear-gradient(135deg, #5A6D47 0%, var(--olive-green) 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(107, 106, 69, 0.4);
  }
  
  .submit-button:active {
    transform: translateY(0);
  }
  
  /* Header Styling */
  .questionnaire-header {
    text-align: center;
    margin-bottom: 3rem;
    padding: 0 1rem;
  }
  
  .questionnaire-header .dashboard-tagline {
    font-style: italic;
    color: var(--olive-green);
    margin-bottom: 0.5rem;
  }
  
  .questionnaire-header h1 {
    font-family: var(--font-heading);
    font-size: 2.5rem;
    color: var(--charcoal-brown);
    margin: 0 0 1rem;
    font-weight: 400;
  }
  
  .questionnaire-header p {
    font-size: 1.05rem;
    line-height: 1.7;
    color: var(--charcoal-brown);
    opacity: 0.8;
    max-width: 700px;
    margin: 0 auto;
  }
  
  /* ============================================
     COMPREHENSIVE MOBILE RESPONSIVE STYLES
     ============================================ */
  @media (max-width: 768px) {
    .questionnaire-page {
      padding: 0 0.75rem;
    }
    
    .questionnaire-header {
      margin-bottom: 2rem;
      padding: 0;
    }
    
    .questionnaire-header h1 {
      font-size: 1.75rem !important;
      line-height: 1.3;
    }
    
    .questionnaire-header p {
      font-size: 0.95rem !important;
      line-height: 1.6;
    }
    
    .questionnaire-section {
      padding: 1.5rem 1rem !important;
      margin-bottom: 1.5rem;
      border-radius: 12px;
    }
    
    .questionnaire-section h2 {
      font-size: 1.4rem !important;
      margin-bottom: 1.25rem;
      padding-bottom: 0.5rem;
    }
    
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-group label {
      font-size: 0.85rem !important;
      margin-bottom: 0.75rem;
    }
    
    .form-group input[type="text"],
    .form-group input[type="email"],
    .form-group input[type="tel"],
    .form-group input[type="date"],
    .form-group textarea,
    .form-group select {
      padding: 1rem !important;
      font-size: 16px !important; /* Prevents zoom on iOS */
      min-height: 48px; /* Touch-friendly */
      border-radius: 8px;
      width: 100% !important;
    }
    
    .form-group textarea {
      min-height: 100px;
      padding: 1rem !important;
    }
    
    .radio-group {
      flex-direction: column;
      gap: 1rem !important;
      align-items: stretch;
    }
    
    .radio-group label {
      padding: 1rem !important;
      font-size: 1rem !important;
      min-height: 48px; /* Touch-friendly */
      display: flex;
      align-items: center;
      justify-content: flex-start;
      border: 2px solid var(--taupe-beige);
      border-radius: 8px;
      transition: all 0.2s ease;
    }
    
    .radio-group label:hover,
    .radio-group label:focus-within {
      border-color: var(--olive-green);
      background: rgba(107, 106, 69, 0.05);
    }
    
    .radio-group input[type="radio"] {
      width: 24px !important;
      height: 24px !important;
      flex-shrink: 0;
    }
    
    .submit-button {
      width: 100% !important;
      padding: 1.25rem 2rem !important;
      font-size: 1rem !important;
      margin: 2rem auto 0 !important;
      min-height: 56px; /* Large touch target */
      border-radius: 12px;
    }
  }
  
  /* Extra small phones */
  @media (max-width: 480px) {
    .questionnaire-header h1 {
      font-size: 1.5rem !important;
    }
    
    .questionnaire-section {
      padding: 1.25rem 0.75rem !important;
    }
    
    .questionnaire-section h2 {
      font-size: 1.25rem !important;
    }
    
    .form-group label {
      font-size: 0.8rem !important;
    }
  }
</style>

<div class="questionnaire-page">
  <div class="questionnaire-header">
    <p class="dashboard-tagline">Make it intentional</p>
    <h1>Home Buyer Questionnaire</h1>
    <p>Please take a few minutes to complete this questionnaire to help us understand your preferences and requirements for your home purchase. Your responses will help us provide you with the best possible service.</p>
  </div>

  <form method="post" style="width: 100%; max-width: 100%;">
    
    <!-- Personal Information Section -->
    <div class="questionnaire-section">
      <h2>Personal Information</h2>
      
      <div class="form-group">
        <label for="legal_name">Legal Name(s)</label>
        <input type="text" id="legal_name" name="legal_name" value="{{ plan.legal_name if plan else '' }}" placeholder="Enter full legal name(s)" />
      </div>
      
      <div class="form-group">
        <label for="email">Email(s)</label>
        <input type="email" id="email" name="email" value="{{ plan.email if plan else '' }}" placeholder="your.email@example.com" />
      </div>
      
      <div class="form-group">
        <label for="phone">Phone Number(s)</label>
        <input type="tel" id="phone" name="phone" value="{{ plan.phone if plan else '' }}" placeholder="(555) 123-4567" />
      </div>
      
      <div class="form-group">
        <label for="birthday">Birthday(s) (Month/Day)</label>
        <input type="text" id="birthday" name="birthday" value="{{ plan.birthday if plan else '' }}" placeholder="MM/DD" />
      </div>
    </div>
    
    <!-- Home Purchase Basics -->
    <div class="questionnaire-section">
      <h2>Home Purchase Basics</h2>
      
      <div class="form-group">
        <label>Have you been pre-approved for a mortgage?</label>
        <div class="radio-group">
          {% set pa = plan.preapproved if plan else '' %}
          <label>
            <input type="radio" name="preapproved" value="Yes" {% if pa == 'Yes' %}checked{% endif %} />
            <span>Yes</span>
          </label>
          <label>
            <input type="radio" name="preapproved" value="No" {% if pa == 'No' or not pa %}checked{% endif %} />
            <span>No, I'd like an introduction to trusted lenders</span>
          </label>
        </div>
      </div>
      
      <div class="form-group">
        <label for="timeline">Are you looking to move in by a specific date?</label>
        <select id="timeline" name="timeline">
          {% set tl = plan.timeline if plan else '' %}
          <option value="">Select timeline...</option>
          <option value="Now" {% if tl == 'Now' %}selected{% endif %}>Now</option>
          <option value="1-3 months" {% if tl == '1-3 months' %}selected{% endif %}>In 1 to 3 months</option>
          <option value="3-6 months" {% if tl == '3-6 months' %}selected{% endif %}>In 3 to 6 months</option>
          <option value="6-12 months" {% if tl == '6-12 months' %}selected{% endif %}>In 6 to 12 months</option>
          <option value="12+ months" {% if tl == '12+ months' %}selected{% endif %}>In 12 months or later</option>
          <option value="Just browsing" {% if tl == 'Just browsing' %}selected{% endif %}>Just browsing ideas</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="budget">What is your budget range for your home purchase?</label>
        <input type="text" id="budget" name="budget" value="{{ plan.budget if plan else '' }}" placeholder="Example: up to $450,000 or around $2,500 per month" />
      </div>
      
      <div class="form-group">
        <label for="beds_baths">How many bedrooms would you like?</label>
        <input type="text" id="beds_baths" name="beds_baths" value="{{ plan.beds_baths if plan else '' }}" placeholder="Example: at least 3 bedrooms and 2 bathrooms" />
      </div>
      
      <div class="form-group">
        <label for="must_haves">What are you looking for in a home that you do not have right now?</label>
        <textarea id="must_haves" name="must_haves" rows="3" placeholder="Parking, yard, kitchen style, office space, school district, and more">{{ plan.must_haves if plan else '' }}</textarea>
      </div>
      
      <div class="form-group">
        <label for="areas">What is your preferred location or neighborhood for your new home? (City, zip codes, county)</label>
        <textarea id="areas" name="areas" rows="2" placeholder="Neighborhoods, school districts, sides of town, specific cities or zip codes">{{ plan.areas if plan else '' }}</textarea>
      </div>
    </div>
    
    <!-- Property Preferences -->
    <div class="questionnaire-section">
      <h2>Property Preferences</h2>
      
      <div class="form-group">
        <label for="floor_plan">Do you have a floor plan you are against? (e.g., ranch, split entry, f/b split, raised ranch...)</label>
        <input type="text" id="floor_plan" name="floor_plan" value="{{ plan.floor_plan if plan else '' }}" placeholder="List any floor plans you prefer to avoid" />
      </div>
      
      <div class="form-group">
        <label for="important_items">Are there important items you would like? (e.g., fence, garage, pool, finished basement, etc.)</label>
        <textarea id="important_items" name="important_items" rows="2" placeholder="Fence, garage, pool, finished basement, etc.">{{ plan.important_items if plan else '' }}</textarea>
      </div>
      
      <div class="form-group">
        <label for="garage_specifics">If yes on a garage, are you specific on how many? (1, 2, 3, 3+?)</label>
        <input type="text" id="garage_specifics" name="garage_specifics" value="{{ plan.garage_specifics if plan else '' }}" placeholder="Number of garage spaces needed" />
      </div>
      
      <div class="form-group">
        <label for="requirements">Are there any requirements/restrictions for the property? (e.g., pet-friendly, trailer, accessibility, etc.)</label>
        <textarea id="requirements" name="requirements" rows="2" placeholder="Pet-friendly, trailer parking, accessibility needs, HOA restrictions, etc.">{{ plan.requirements if plan else '' }}</textarea>
      </div>
      
      <div class="form-group">
        <label for="home_type">Home Type</label>
        <input type="text" id="home_type" name="home_type" value="{{ plan.home_type if plan else '' }}" placeholder="House, townhome, condo, new build, or mix" />
      </div>
      
      <div class="form-group">
        <label for="construction_type">Are you looking for new construction or pre-owned property?</label>
        <select id="construction_type" name="construction_type">
          {% set ct = plan.construction_type if plan else '' %}
          <option value="">Select preference...</option>
          <option value="New construction" {% if ct == 'New construction' %}selected{% endif %}>New construction</option>
          <option value="Pre-owned" {% if ct == 'Pre-owned' %}selected{% endif %}>Pre-owned</option>
          <option value="Either" {% if ct == 'Either' %}selected{% endif %}>Either</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="condition">Are you looking for a move-in ready property, one that requires renovation, or open to either?</label>
        <select id="condition" name="condition">
          {% set cond = plan.condition if plan else '' %}
          <option value="">Select preference...</option>
          <option value="Move-in ready" {% if cond == 'Move-in ready' %}selected{% endif %}>Move-in ready</option>
          <option value="Requires renovation" {% if cond == 'Requires renovation' %}selected{% endif %}>Requires renovation</option>
          <option value="Open to either" {% if cond == 'Open to either' %}selected{% endif %}>Open to either</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="lot_size">Do you have a preference on lot size? (.15ac-1ac, 2ac, 3ac, 4ac, 5+ac...etc? 43,560sf=1ac)</label>
        <input type="text" id="lot_size" name="lot_size" value="{{ plan.lot_size if plan else '' }}" placeholder="Lot size preference" />
      </div>
      
      <div class="form-group">
        <label for="architectural_style">Do you have a preferred architectural style?</label>
        <input type="text" id="architectural_style" name="architectural_style" value="{{ plan.architectural_style if plan else '' }}" placeholder="Modern, traditional, farmhouse, craftsman, etc." />
      </div>
    </div>
    
    <!-- Location & Lifestyle -->
    <div class="questionnaire-section">
      <h2>Location & Lifestyle</h2>
      
      <div class="form-group">
        <label for="school_districts">Are school districts important to you? If so, is there a specific school district?</label>
        <textarea id="school_districts" name="school_districts" rows="2" placeholder="School district preferences or requirements">{{ plan.school_districts if plan else '' }}</textarea>
      </div>
      
      <div class="form-group">
        <label for="transportation">How important is proximity to public transportation or major highways for you?</label>
        <textarea id="transportation" name="transportation" rows="2" placeholder="Transportation needs and preferences">{{ plan.transportation if plan else '' }}</textarea>
      </div>
      
      <div class="form-group">
        <label for="contact_method">What is your preferred method of contact? (Email, Phone call, or Text)</label>
        <div class="radio-group">
          {% set cm = plan.contact_method if plan else '' %}
          <label>
            <input type="radio" name="contact_method" value="Email" {% if cm == 'Email' %}checked{% endif %} />
            <span>Email</span>
          </label>
          <label>
            <input type="radio" name="contact_method" value="Phone call" {% if cm == 'Phone call' %}checked{% endif %} />
            <span>Phone call</span>
          </label>
          <label>
            <input type="radio" name="contact_method" value="Text" {% if cm == 'Text' %}checked{% endif %} />
            <span>Text</span>
          </label>
        </div>
      </div>
    </div>
    
    <!-- Additional Information -->
    <div class="questionnaire-section">
      <h2>Additional Information</h2>
      
      <div class="form-group">
        <label for="dealbreakers">Dealbreakers</label>
        <textarea id="dealbreakers" name="dealbreakers" rows="2" placeholder="Any absolute dealbreakers">{{ plan.dealbreakers if plan else '' }}</textarea>
      </div>
      
      <div class="form-group">
        <label for="feeling">What feeling do you want your next home to give you?</label>
        <textarea id="feeling" name="feeling" rows="3" placeholder="Cozy, peaceful, energized, space to host, simple to care for">{{ plan.feeling if plan else '' }}</textarea>
      </div>
      
      <div class="form-group">
        <label for="other_info">Any other information that would be important for me to know?</label>
        <textarea id="other_info" name="other_info" rows="4" placeholder="Additional information, special circumstances, or anything else we should know">{{ plan.other_info if plan else '' }}</textarea>
      </div>
    </div>
    
    <button type="submit" class="submit-button">
      Save My Next Home Plan
    </button>
  </form>
</div>
{% endblock %}
