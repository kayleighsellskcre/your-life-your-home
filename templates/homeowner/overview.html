{% extends "homeowner/layout.html" %}
{% block title %}Dashboard Overview{% endblock %}

{% block homeowner_content %}

<!-- Welcome Section - Calm and Refined -->
<div class="section section-sm" style="background: linear-gradient(135deg, rgba(246, 242, 232, 0.5) 0%, rgba(239, 233, 220, 0.3) 100%);">
  <div class="container">
    <div style="text-align: center; max-width: 800px; margin: 0 auto;">
      <h1 style="font-family: var(--font-heading); font-size: var(--text-4xl); color: var(--charcoal-brown); margin-bottom: var(--space-lg);">
        Welcome Home, 
        <span style="color: var(--olive-green);">
          {% if homeowner and homeowner.name %}
            {{ homeowner.name.split()[0] }}
          {% else %}
            Friend
          {% endif %}
        </span>
      </h1>
      <p style="font-size: var(--text-lg); color: var(--warm-gray); line-height: var(--leading-relaxed); margin-bottom: 0;">
        Your personal homeownership dashboard. Everything you need to manage, maintain, and grow your most valuable asset.
      </p>
    </div>
  </div>
</div>

<!-- Financial Snapshot -->
<div class="section">
  <div class="container">
    <div style="margin-bottom: var(--space-2xl);">
      <h2 style="font-family: var(--font-heading); font-size: var(--text-3xl); text-align: center; margin-bottom: var(--space-sm);">Your Financial Snapshot</h2>
      <p style="text-align: center; color: var(--warm-gray); font-size: var(--text-lg);">Real-time insights into your home's value and equity</p>
    </div>

    <!-- Stats Grid -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--space-lg); margin-bottom: var(--space-3xl);">
      
      <!-- Home Value -->
      <div class="card" style="text-align: center;">
        <div style="font-size: var(--text-3xl); font-family: var(--font-heading); color: var(--olive-green); margin-bottom: var(--space-sm);">
          {% if snapshot and snapshot.get('value_estimate') %}
            ${{ "{:,.0f}".format(snapshot.get('value_estimate')) }}
          {% else %}
            —
          {% endif %}
        </div>
        <div style="font-size: var(--text-sm); text-transform: uppercase; letter-spacing: 0.1em; color: var(--warm-gray); font-weight: var(--weight-medium);">
          Current Home Value
        </div>
      </div>

      <!-- Total Equity -->
      <div class="card" style="text-align: center;">
        <div style="font-size: var(--text-3xl); font-family: var(--font-heading); color: var(--olive-green); margin-bottom: var(--space-sm);">
          {% if snapshot and snapshot.get('equity_estimate') %}
            ${{ "{:,.0f}".format(snapshot.get('equity_estimate')) }}
          {% else %}
            —
          {% endif %}
        </div>
        <div style="font-size: var(--text-sm); text-transform: uppercase; letter-spacing: 0.1em; color: var(--warm-gray); font-weight: var(--weight-medium);">
          Total Equity
        </div>
        {% if snapshot and snapshot.get('value_estimate') and snapshot.get('equity_estimate') %}
        <div style="margin-top: var(--space-sm); padding: 0.375rem 0.75rem; background: rgba(74, 124, 89, 0.1); color: #4A7C59; border-radius: var(--border-radius-md); display: inline-block; font-size: var(--text-xs); font-weight: var(--weight-medium);">
          {{ "{:.1f}".format((snapshot.get('equity_estimate') / snapshot.get('value_estimate') * 100)) }}% ownership
        </div>
        {% endif %}
      </div>

      <!-- Monthly Payment -->
      <div class="card" style="text-align: center;">
        <div style="font-size: var(--text-3xl); font-family: var(--font-heading); color: var(--olive-green); margin-bottom: var(--space-sm);">
          {% if snapshot and snapshot.get('loan_payment') %}
            ${{ "{:,.0f}".format(snapshot.get('loan_payment')) }}
          {% else %}
            —
          {% endif %}
        </div>
        <div style="font-size: var(--text-sm); text-transform: uppercase; letter-spacing: 0.1em; color: var(--warm-gray); font-weight: var(--weight-medium);">
          Monthly Payment
        </div>
      </div>

      <!-- Interest Rate -->
      <div class="card" style="text-align: center;">
        <div style="font-size: var(--text-3xl); font-family: var(--font-heading); color: var(--olive-green); margin-bottom: var(--space-sm);">
          {% if snapshot and snapshot.get('loan_rate') %}
            {{ "{:.2f}".format(snapshot.get('loan_rate')) }}%
          {% else %}
            —
          {% endif %}
        </div>
        <div style="font-size: var(--text-sm); text-transform: uppercase; letter-spacing: 0.1em; color: var(--warm-gray); font-weight: var(--weight-medium);">
          Interest Rate
        </div>
      </div>

    </div>

    <!-- Quick Actions -->
    <div style="display: flex; justify-content: center; gap: var(--space-md); flex-wrap: wrap;">
      <a href="{{ url_for('homeowner_value_equity_overview') }}" class="btn btn-primary">
        View Home Value
      </a>
      <a href="{{ url_for('homeowner_care_maintenance_guide') }}" class="btn btn-secondary">
        Home Care Guide
      </a>
    </div>

  </div>
</div>

<!-- Empty State (if no data) -->
{% if not snapshot or not snapshot.get('value_estimate') %}
<div class="section">
  <div class="container">
    <div style="text-align: center; padding: var(--space-4xl) var(--space-xl); background: linear-gradient(135deg, rgba(246, 242, 232, 0.5) 0%, rgba(239, 233, 220, 0.3) 100%); border-radius: var(--border-radius-2xl); border: 2px dashed rgba(107, 106, 69, 0.2);">
      <h3 style="font-family: var(--font-heading); font-size: var(--text-2xl); margin-bottom: var(--space-md);">Let's Get Started</h3>
      <p style="color: var(--warm-gray); font-size: var(--text-lg); max-width: 600px; margin: 0 auto var(--space-xl);">
        Add your property information to unlock personalized insights, track your home's value, and access all the tools you need.
      </p>
      <a href="{{ url_for('homeowner_value_equity_overview') }}" class="btn btn-primary btn-lg">Add Property Details</a>
    </div>
  </div>
</div>
{% endif %}

{% endblock %}

