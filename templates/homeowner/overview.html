{% extends "homeowner/layout.html" %}
{% block title %}Dashboard Overview{% endblock %}

{% block homeowner_content %}
<style>
  /* Interactive hover animations */
  .hero-visual {
    position: relative;
    height: 100%;
    min-height: 500px;
    background: linear-gradient(135deg, #EFE9DC 0%, #D7C4A5 100%);
    overflow: hidden;
    cursor: pointer;
    transition: all 0.6s ease;
  }
  
  .hero-visual:hover {
    transform: scale(1.02);
  }
  
  .hero-visual::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(107,106,69,0.15) 0%, rgba(200,180,151,0.15) 100%);
    transition: opacity 0.6s ease;
  }
  
  .hero-visual:hover::after {
    opacity: 0.5;
  }
  
  /* Animated decorative elements */
  .leaf-decoration {
    position: absolute;
    opacity: 0.08;
    transition: all 0.8s ease;
  }
  
  .hero-visual:hover .leaf-decoration {
    opacity: 0.15;
    transform: rotate(10deg) scale(1.1);
  }
  
  /* Interactive stat cards */
  .stat-spotlight {
    background: white;
    text-align: center;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    cursor: pointer;
  }
  
  .stat-spotlight::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(107,106,69,0.1), transparent);
    transition: left 0.6s ease;
  }
  
  .stat-spotlight:hover::before {
    left: 100%;
  }
  
  .stat-spotlight:hover {
    transform: translateY(-12px);
    box-shadow: 0 20px 40px rgba(58, 53, 44, 0.15);
  }
  
  .stat-value-display {
    transition: all 0.3s ease;
  }
  
  .stat-spotlight:hover .stat-value-display {
    transform: scale(1.05);
    color: #6B6A45;
  }
  
  /* Pulsing badge */
  @keyframes pulse-badge {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.05); opacity: 0.9; }
  }
  
  .logo-badge {
    animation: pulse-badge 3s ease-in-out infinite;
  }
  
  /* Smooth CTA button */
  .cta-button {
    display: inline-block;
    padding: 1.1rem 3rem;
    background: #6B6A45;
    color: white;
    text-decoration: none;
    font-size: 0.9rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 500;
    position: relative;
    overflow: hidden;
  }
  
  .cta-button::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255,255,255,0.2);
    transform: translate(-50%, -50%);
    transition: width 0.6s ease, height 0.6s ease;
  }
  
  .cta-button:hover::before {
    width: 300px;
    height: 300px;
  }
  
  .cta-button:hover {
    background: #5A6D47;
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(107, 106, 69, 0.3);
  }
  
  /* Interactive quick steps */
  .step-card {
    background: white;
    padding: 2.5rem 2rem;
    text-align: center;
    border: 1px solid rgba(200, 180, 151, 0.3);
    transition: all 0.4s ease;
    cursor: pointer;
    position: relative;
  }
  
  .step-card::after {
    content: '‚Üí';
    position: absolute;
    bottom: 1.5rem;
    left: 50%;
    transform: translateX(-50%) translateY(10px);
    opacity: 0;
    font-size: 1.5rem;
    color: #6B6A45;
    transition: all 0.3s ease;
  }
  
  .step-card:hover {
    border-color: #6B6A45;
    transform: translateY(-8px);
    box-shadow: 0 15px 35px rgba(58, 53, 44, 0.12);
  }
  
  .step-card:hover::after {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
  
  .step-icon {
    font-size: 2.5rem;
    transition: all 0.3s ease;
    display: inline-block;
  }
  
  .step-card:hover .step-icon {
    transform: scale(1.2) rotateY(180deg);
  }
  
  /* Outline buttons with fill animation */
  .outline-btn {
    padding: 1rem 2rem;
    border: 1px solid #6B6A45;
    color: #6B6A45;
    text-decoration: none;
    font-size: 0.85rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    transition: all 0.3s ease;
    font-weight: 500;
    position: relative;
    overflow: hidden;
    z-index: 1;
  }
  
  .outline-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: #6B6A45;
    transition: left 0.4s ease;
    z-index: -1;
  }
  
  .outline-btn:hover::before {
    left: 0;
  }
  
  .outline-btn:hover {
    color: white;
  }
  
  /* Count-up animation for stats */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .animate-in {
    animation: fadeInUp 0.8s ease forwards;
  }
  
  /* Parallax effect on scroll */
  .parallax-section {
    transition: transform 0.3s ease-out;
  }
  
  /* Interactive info tooltip */
  .info-tooltip {
    position: relative;
    display: inline-block;
    cursor: help;
  }
  
  .info-tooltip .tooltip-content {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    background: #3A352C;
    color: white;
    padding: 0.75rem 1rem;
    border-radius: 4px;
    font-size: 0.8rem;
    white-space: nowrap;
    transition: all 0.3s ease;
    z-index: 100;
  }
  
  .info-tooltip:hover .tooltip-content {
    visibility: visible;
    opacity: 1;
    bottom: 135%;
  }
  
  /* Progress indicators */
  .progress-ring {
    transition: stroke-dashoffset 1s ease;
  }
  
  /* Ripple effect */
  .ripple {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.6);
    transform: scale(0);
    animation: ripple-animation 0.6s ease-out;
  }
  
  @keyframes ripple-animation {
    to {
      transform: scale(4);
      opacity: 0;
    }
  }
</style>

<!-- Hero Section: Stacked Layout -->
<div style="margin-bottom: 6rem;" class="animate-in">
  <!-- Top: Interactive Lifestyle Visual -->
  <div class="hero-visual" onclick="this.style.transform='scale(1.05)'; setTimeout(() => this.style.transform='scale(1)', 200)" style="margin-bottom: 3rem; min-height: 150px;">
    <div style="position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #6B6A45; font-family: var(--font-heading); font-size: 2.5rem; text-align: center; padding: 1.5rem; z-index: 2;">
      <div style="font-weight: 400; line-height: 1.2;">Your Home ‚Ä¢ Your Sanctuary</div>
    </div>
    
    <!-- Animated decorative elements -->
    <div class="leaf-decoration" style="top: 10%; left: 5%; width: 100px; height: 100px;">
      <svg viewBox="0 0 100 100" style="width: 100%; height: 100%;">
        <ellipse cx="50" cy="30" rx="25" ry="35" fill="#6B6A45" opacity="0.3"/>
        <ellipse cx="50" cy="70" rx="20" ry="30" fill="#6B6A45" opacity="0.3"/>
      </svg>
    </div>
    <div class="leaf-decoration" style="bottom: 10%; right: 5%; width: 120px; height: 120px;">
      <svg viewBox="0 0 100 100" style="width: 100%; height: 100%;">
        <circle cx="50" cy="50" r="40" fill="#C8B497" opacity="0.3"/>
      </svg>
    </div>
  </div>
  
  <!-- Bottom: Welcome Message Block -->
  <div style="text-align: center; max-width: 900px; margin: 0 auto;">
    <h1 style="font-family: var(--font-heading); font-size: 3.5rem; line-height: 1.2; margin: 0 0 1.5rem; color: #3A352C; font-weight: 400; letter-spacing: -0.01em;">
      Welcome Home,<br/>
      <span style="color: #6B6A45; position: relative;">
        {{ snapshot.name.split()[0] if snapshot and snapshot.name else "Friend" }}
        <span style="position: absolute; bottom: -5px; left: 0; width: 100%; height: 2px; background: linear-gradient(90deg, #6B6A45, transparent);"></span>
      </span>
    </h1>
    
    <p style="font-size: 1.05rem; line-height: 2; color: #3A352C; opacity: 0.75; margin-bottom: 3rem; font-weight: 300;">
      Your personal wealth dashboard‚Äîtracking value, equity, and opportunities. Every number tells your story. Every update brings clarity.
    </p>
    
    <a href="{{ url_for('homeowner_value_equity_overview') }}" class="cta-button">
      <span style="position: relative; z-index: 1;">Explore Your Equity ‚Üí</span>
    </a>
  </div>
</div>

<!-- Live Stats: Interactive Spotlight Cards -->
<div style="margin-bottom: 6rem;" class="animate-in" style="animation-delay: 0.2s;">
  <div style="text-align: center; margin-bottom: 4rem;">
    <h2 style="font-family: var(--font-heading); font-size: 2.8rem; margin-bottom: 1rem; color: #3A352C; font-weight: 400; letter-spacing: 0.01em;">
      Your Financial Snapshot
    </h2>
    <p style="font-size: 1rem; color: #6B6A45; opacity: 0.8; font-weight: 300;">Live data ‚Ä¢ Updated daily ‚Ä¢ Always accurate</p>
  </div>
  
  <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 3rem; align-items: end;">
    <!-- Card 1: Home Value with interactive tooltip -->
    <div class="stat-spotlight" onclick="this.querySelector('.stat-value-display').style.color='#5A6D47'">
      <div style="aspect-ratio: 1; background: linear-gradient(135deg, #F6F2E8 0%, #EFE9DC 100%); padding: 3rem 2rem; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative;">
        <div class="info-tooltip" style="position: absolute; top: 1rem; right: 1rem; width: 24px; height: 24px; border: 1px solid #6B6A45; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; color: #6B6A45;">
          i
          <span class="tooltip-content">Based on recent market activity</span>
        </div>
        <div style="font-size: 0.7rem; letter-spacing: 0.12em; text-transform: uppercase; color: #6B6A45; margin-bottom: 1rem; font-weight: 500;">Current Value</div>
        <div class="stat-value-display" style="font-family: var(--font-heading); font-size: 2.8rem; color: #3A352C; font-weight: 400; margin-bottom: 0.5rem;">
          {% if snapshot and snapshot.value_estimate %}
            ${{ "{:,.0f}".format(snapshot.value_estimate) }}
          {% else %}
            ‚Äî
          {% endif %}
        </div>
        {% if snapshot and snapshot.value_estimate %}
        <div style="font-size: 0.85rem; color: #6B6A45; font-weight: 500;">
          ‚Üó +{{ ((snapshot.value_estimate - (snapshot.value_estimate * 0.95)) / (snapshot.value_estimate * 0.95) * 100) | round(1) }}% YTD
        </div>
        {% endif %}
      </div>
      <div style="padding: 2rem 1.5rem;">
        <h3 style="font-family: var(--font-heading); font-size: 1.4rem; margin: 0 0 0.75rem; color: #3A352C; font-weight: 400;">Home Value</h3>
        <p style="font-size: 0.85rem; color: #6B6A45; font-weight: 400; opacity: 0.8; line-height: 1.6;">Real-time market estimate</p>
        <a href="{{ cloud_cma_url }}" target="_blank" style="display: inline-block; margin-top: 1rem; font-size: 0.8rem; color: #6B6A45; text-decoration: none; border-bottom: 1px solid #6B6A45; padding-bottom: 2px; transition: all 0.3s ease;" onmouseover="this.style.borderBottom='1px solid transparent'" onmouseout="this.style.borderBottom='1px solid #6B6A45'">
          Get detailed report ‚Üí
        </a>
      </div>
    </div>
    
    <!-- Card 2: Equity with progress visualization -->
    <div class="stat-spotlight" onclick="this.querySelector('.stat-value-display').style.color='#5A6D47'">
      <div style="aspect-ratio: 1; background: linear-gradient(135deg, #F6F2E8 0%, #EFE9DC 100%); padding: 3rem 2rem; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative;">
        {% if snapshot and snapshot.equity_estimate and snapshot.value_estimate %}
          {% set equity_percent = (snapshot.equity_estimate / snapshot.value_estimate * 100) | round(0) %}
          <!-- Circular progress indicator -->
          <svg style="position: absolute; top: 1rem; right: 1rem; width: 50px; height: 50px; transform: rotate(-90deg);">
            <circle cx="25" cy="25" r="20" stroke="#EFE9DC" stroke-width="3" fill="none"/>
            <circle cx="25" cy="25" r="20" stroke="#6B6A45" stroke-width="3" fill="none"
                    stroke-dasharray="{{ 125.6 }}" 
                    stroke-dashoffset="{{ 125.6 - (125.6 * equity_percent / 100) }}"
                    style="transition: stroke-dashoffset 2s ease;"/>
          </svg>
          <div style="position: absolute; top: 1.75rem; right: 1.65rem; font-size: 0.65rem; color: #6B6A45; font-weight: 600;">{{ equity_percent }}%</div>
        {% endif %}
        <div style="font-size: 0.7rem; letter-spacing: 0.12em; text-transform: uppercase; color: #6B6A45; margin-bottom: 1rem; font-weight: 500;">Your Equity</div>
        <div class="stat-value-display" style="font-family: var(--font-heading); font-size: 2.8rem; color: #3A352C; font-weight: 400; margin-bottom: 0.5rem;">
          {% if snapshot and snapshot.equity_estimate %}
            ${{ "{:,.0f}".format(snapshot.equity_estimate) }}
          {% else %}
            ‚Äî
          {% endif %}
        </div>
        {% if snapshot and snapshot.equity_estimate and snapshot.value_estimate %}
        <div style="font-size: 0.85rem; color: #6B6A45; font-weight: 500;">
          {{ equity_percent }}% of home value
        </div>
        {% endif %}
      </div>
      <div style="padding: 2rem 1.5rem;">
        <h3 style="font-family: var(--font-heading); font-size: 1.4rem; margin: 0 0 0.75rem; color: #3A352C; font-weight: 400;">Equity Position</h3>
        <p style="font-size: 0.85rem; color: #6B6A45; font-weight: 400; opacity: 0.8; line-height: 1.6;">What you truly own</p>
        <a href="{{ url_for('homeowner_value_equity_overview') }}" style="display: inline-block; margin-top: 1rem; font-size: 0.8rem; color: #6B6A45; text-decoration: none; border-bottom: 1px solid #6B6A45; padding-bottom: 2px; transition: all 0.3s ease;" onmouseover="this.style.borderBottom='1px solid transparent'" onmouseout="this.style.borderBottom='1px solid #6B6A45'">
          View equity dashboard ‚Üí
        </a>
      </div>
    </div>
    
    <!-- Card 3: Loan Details -->
    <div class="stat-spotlight" onclick="this.querySelector('.stat-value-display').style.color='#5A6D47'" style="display: flex; flex-direction: column;">
      <div style="background: linear-gradient(135deg, #F6F2E8 0%, #EFE9DC 100%); padding: 2rem 2rem; display: flex; flex-direction: column; align-items: center; justify-content: center;">
        <div style="width: 100%; text-align: center;">
          <div style="margin-bottom: 1rem; padding-bottom: 0.75rem; border-bottom: 1px solid rgba(107,106,69,0.2);">
            <div style="font-size: 0.65rem; letter-spacing: 0.12em; text-transform: uppercase; color: #6B6A45; font-weight: 500; margin-bottom: 0.5rem;">Rate</div>
            <div class="stat-value-display" style="font-family: var(--font-heading); font-size: 1.8rem; color: #3A352C; font-weight: 400;">
              {% if snapshot and snapshot.loan_rate %}{{ "{:.2f}".format(snapshot.loan_rate) }}%{% else %}‚Äî{% endif %}
            </div>
          </div>
          <div style="margin-bottom: 1rem; padding-bottom: 0.75rem; border-bottom: 1px solid rgba(107,106,69,0.2);">
            <div style="font-size: 0.65rem; letter-spacing: 0.12em; text-transform: uppercase; color: #6B6A45; font-weight: 500; margin-bottom: 0.5rem;">Monthly</div>
            <div class="stat-value-display" style="font-family: var(--font-heading); font-size: 1.5rem; color: #3A352C; font-weight: 400;">
              {% if snapshot and snapshot.loan_payment %}${{ "{:,.0f}".format(snapshot.loan_payment) }}{% else %}‚Äî{% endif %}
            </div>
          </div>
          <div>
            <div style="font-size: 0.65rem; letter-spacing: 0.12em; text-transform: uppercase; color: #6B6A45; font-weight: 500; margin-bottom: 0.5rem;">Balance</div>
            <div class="stat-value-display" style="font-family: var(--font-heading); font-size: 1.3rem; color: #3A352C; font-weight: 400;">
              {% if snapshot and snapshot.loan_balance %}${{ "{:,.0f}".format(snapshot.loan_balance) }}{% else %}‚Äî{% endif %}
            </div>
          </div>
        </div>
      </div>
      <div style="padding: 2rem 1.5rem; flex: 1; display: flex; flex-direction: column;">
        <h3 style="font-family: var(--font-heading); font-size: 1.4rem; margin: 0 0 0.75rem; color: #3A352C; font-weight: 400;">Loan Overview</h3>
        <p style="font-size: 0.85rem; color: #6B6A45; font-weight: 400; opacity: 0.8; line-height: 1.6;">Current mortgage terms</p>
        <a href="{{ url_for('homeowner_next_loan_paths') }}" style="display: inline-block; margin-top: auto; padding-top: 1rem; font-size: 0.8rem; color: #6B6A45; text-decoration: none; border-bottom: 1px solid #6B6A45; padding-bottom: 2px; transition: all 0.3s ease;" onmouseover="this.style.borderBottom='1px solid transparent'" onmouseout="this.style.borderBottom='1px solid #6B6A45'">
          Explore loan options ‚Üí
        </a>
      </div>
    </div>
  </div>
</div>

<!-- Wealth Builder Section: Stacked Layout -->
<div style="background: #F6F2E8; margin: 35rem -4rem 6rem; padding: 6rem 4rem;" class="parallax-section">
  <div style="max-width: 1200px; margin: 0 auto;">
    <!-- Top: Visual -->
    <div style="margin-bottom: 4rem;">
      <div style="position: relative; min-height: 150px; background: linear-gradient(135deg, #EFE9DC 0%, #D7C4A5 100%); display: flex; align-items: center; justify-content: center; color: #6B6A45; font-family: var(--font-heading); font-size: 1.8rem; text-align: center; padding: 1.5rem; overflow: hidden;">
        <div style="position: relative; z-index: 2;">
          Your Home ‚Ä¢ Your Legacy
        </div>
        <!-- Animated background shapes -->
        <div style="position: absolute; top: 10%; right: 10%; width: 100px; height: 100px; border: 2px solid rgba(107,106,69,0.2); border-radius: 50%; animation: pulse-badge 4s ease-in-out infinite;"></div>
        <div style="position: absolute; bottom: 15%; left: 15%; width: 80px; height: 80px; border: 2px solid rgba(107,106,69,0.2); animation: pulse-badge 3s ease-in-out infinite; animation-delay: 1s;"></div>
      </div>
    </div>
    
    <!-- Bottom: Text Content -->
    <div style="text-align: center; max-width: 900px; margin: 0 auto;">
      <div style="display: inline-block; padding: 0.4rem 1rem; background: white; border: 1px solid #6B6A45; margin-bottom: 2rem; font-size: 0.7rem; letter-spacing: 0.15em; text-transform: uppercase; color: #6B6A45; font-weight: 500;">
        Your Wealth Journey
      </div>
      <h2 style="font-family: var(--font-heading); font-size: 3.5rem; line-height: 1.25; margin: 0 0 2rem; color: #3A352C; font-weight: 400;">
        Every Month,<br/>
        Your Wealth Grows
      </h2>
      <p style="font-size: 1.15rem; line-height: 2; color: #3A352C; opacity: 0.75; font-weight: 300; margin-bottom: 1rem;">
        {% if snapshot and snapshot.loan_payment and snapshot.loan_balance and snapshot.loan_rate %}
          {% set monthly_principal = (snapshot.loan_payment - (snapshot.loan_balance * snapshot.loan_rate / 100 / 12)) %}
          Every payment adds <strong style="color: #6B6A45; font-weight: 500;">${{ "{:,.0f}".format(monthly_principal) }}</strong> to your equity.
        {% else %}
          Every payment builds your equity. Every improvement adds value.
        {% endif %}
        Every decision shapes your future.
      </p>
      <p style="font-size: 1.05rem; line-height: 2; color: #3A352C; opacity: 0.7; font-weight: 300; margin-bottom: 3rem;">
        We're here to help you see the full picture and make choices that feel right for your life.
      </p>
      <a href="{{ url_for('homeowner_next_pathways') }}" class="outline-btn">
        Explore Your Next Steps ‚Üí
      </a>
    </div>
  </div>
</div>

<!-- Interactive Action Cards -->
<div style="margin-bottom: 6rem;" class="animate-in" style="animation-delay: 0.4s;">
  <div style="text-align: center; margin-bottom: 4rem;">
    <h2 style="font-family: var(--font-heading); font-size: 2.8rem; margin-bottom: 1rem; color: #3A352C; font-weight: 400; letter-spacing: 0.01em;">
      Recommended Next Steps
    </h2>
    <p style="font-size: 1rem; color: #6B6A45; opacity: 0.8; font-weight: 300;">Click to explore ‚Ä¢ Each step takes less than 5 minutes</p>
  </div>
  
  <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 2.5rem;">
    <a href="{{ url_for('homeowner_value_equity_overview') }}" class="step-card" style="text-decoration: none; color: inherit;">
      <div class="step-icon">üìä</div>
      <h3 style="font-family: var(--font-heading); font-size: 1.4rem; margin: 1.5rem 0 1rem; color: #3A352C; font-weight: 400;">Update Your Numbers</h3>
      <p style="font-size: 0.95rem; line-height: 1.9; color: #3A352C; opacity: 0.7; font-weight: 300; margin-bottom: 2rem;">Refresh loan details for accurate equity tracking</p>
    </a>
    
    <a href="{{ url_for('homeowner_reno_planner') }}" class="step-card" style="text-decoration: none; color: inherit;">
      <div class="step-icon">üî®</div>
      <h3 style="font-family: var(--font-heading); font-size: 1.4rem; margin: 1.5rem 0 1rem; color: #3A352C; font-weight: 400;">Plan Renovations</h3>
      <p style="font-size: 0.95rem; line-height: 1.9; color: #3A352C; opacity: 0.7; font-weight: 300; margin-bottom: 2rem;">Track ideas, costs, and ROI for home improvements</p>
    </a>
    
    <a href="{{ url_for('homeowner_next_plan_move') }}" class="step-card" style="text-decoration: none; color: inherit;">
      <div class="step-icon">üè°</div>
      <h3 style="font-family: var(--font-heading); font-size: 1.4rem; margin: 1.5rem 0 1rem; color: #3A352C; font-weight: 400;">Explore Moving</h3>
      <p style="font-size: 0.95rem; line-height: 1.9; color: #3A352C; opacity: 0.7; font-weight: 300; margin-bottom: 2rem;">See timing, affordability, and next home options</p>
    </a>
  </div>
</div>

<!-- Quick Actions Footer -->
<div style="background: #EFE9DC; margin: 0 -4rem; padding: 5rem 4rem; text-align: center;">
  <h2 style="font-family: var(--font-heading); font-size: 2.2rem; margin-bottom: 3rem; color: #3A352C; font-weight: 400;">
    Quick Access Tools
  </h2>
  
  <div style="display: flex; justify-content: center; gap: 1.5rem; flex-wrap: wrap;">
    <a href="{{ cloud_cma_url }}" target="_blank" rel="noopener" class="outline-btn">
      Pull Home Worth Report
    </a>
    <a href="{{ url_for('homeowner_home_timeline') }}" class="outline-btn">
      View Home Timeline
    </a>
    <a href="{{ url_for('homeowner_care_maintenance_guide') }}" class="outline-btn">
      Maintenance Guide
    </a>
    <a href="{{ url_for('homeowner_upload_documents') }}" class="outline-btn">
      Upload Documents
    </a>
  </div>
</div>

<script>
// Count-up animation for stat values
document.addEventListener('DOMContentLoaded', function() {
  const statValues = document.querySelectorAll('.stat-value-display');
  
  statValues.forEach(stat => {
    const text = stat.textContent.trim();
    if (text.includes('$') && !text.includes('‚Äî')) {
      const value = parseInt(text.replace(/[$,]/g, ''));
      if (!isNaN(value)) {
        animateValue(stat, 0, value, 2000);
      }
    }
  });
  
  function animateValue(element, start, end, duration) {
    const startTime = performance.now();
    const isPercent = element.textContent.includes('%');
    
    function update(currentTime) {
      const elapsed = currentTime - startTime;
      const progress = Math.min(elapsed / duration, 1);
      const easeOut = 1 - Math.pow(1 - progress, 3);
      const current = Math.floor(start + (end - start) * easeOut);
      
      if (isPercent) {
        element.textContent = current.toFixed(2) + '%';
      } else {
        element.textContent = '$' + current.toLocaleString();
      }
      
      if (progress < 1) {
        requestAnimationFrame(update);
      }
    }
    
    requestAnimationFrame(update);
  }
  
  // Parallax effect on scroll
  let ticking = false;
  
  window.addEventListener('scroll', function() {
    if (!ticking) {
      window.requestAnimationFrame(function() {
        const parallaxSections = document.querySelectorAll('.parallax-section');
        const scrolled = window.pageYOffset;
        
        parallaxSections.forEach(section => {
          const speed = 0.5;
          const yPos = -(scrolled * speed);
          section.style.transform = `translateY(${yPos}px)`;
        });
        
        ticking = false;
      });
      
      ticking = true;
    }
  });
  
  // Ripple effect on stat cards
  const statCards = document.querySelectorAll('.stat-spotlight');
  
  statCards.forEach(card => {
    card.addEventListener('click', function(e) {
      const ripple = document.createElement('span');
      ripple.classList.add('ripple');
      
      const rect = card.getBoundingClientRect();
      const size = Math.max(rect.width, rect.height);
      const x = e.clientX - rect.left - size / 2;
      const y = e.clientY - rect.top - size / 2;
      
      ripple.style.width = ripple.style.height = size + 'px';
      ripple.style.left = x + 'px';
      ripple.style.top = y + 'px';
      
      card.appendChild(ripple);
      
      setTimeout(() => ripple.remove(), 600);
    });
  });
});
</script>

<!-- Hero Section: Split Layout (60% visual / 40% content) -->
<div style="display: grid; grid-template-columns: 1.5fr 1fr; gap: 4rem; margin-bottom: 5rem; min-height: 60vh; align-items: center;">
  <!-- Left: Lifestyle Visual with Decorative Overlay -->
  <div style="position: relative; height: 100%; min-height: 400px; background: linear-gradient(135deg, #EFE9DC 0%, #D7C4A5 100%); border-radius: 0; overflow: hidden;">
    <!-- Placeholder for lifestyle photo - Replace with actual image -->
    <div style="position: absolute; inset: 0; background: linear-gradient(135deg, rgba(107,106,69,0.15) 0%, rgba(200,180,151,0.15) 100%); display: flex; align-items: center; justify-content: center; color: #6B6A45; font-family: var(--font-heading); font-size: 1.2rem; text-align: center; padding: 2rem;">
      Your Home<br/>Your Sanctuary
    </div>
    <!-- Decorative plant leaf graphic overlay -->
    <div style="position: absolute; top: -20px; right: -20px; width: 150px; height: 150px; opacity: 0.1;">
      <svg viewBox="0 0 100 100" style="width: 100%; height: 100%;">
        <path d="M50 10 Q70 30 50 50 Q30 30 50 10" fill="#6B6A45"/>
        <path d="M50 50 Q70 70 50 90 Q30 70 50 50" fill="#6B6A45"/>
      </svg>
    </div>
  </div>
  
  <!-- Right: Welcome Message Block -->
  <div style="padding: 2rem 0;">
    <!-- Small logo stamp -->
    <div style="display: inline-block; padding: 0.5rem 1.5rem; border: 1px solid #6B6A45; margin-bottom: 2rem; font-size: 0.75rem; letter-spacing: 0.15em; text-transform: uppercase; color: #6B6A45; font-weight: 500;">
      Your Life ‚Ä¢ Your Home
    </div>
    
    <h1 style="font-family: var(--font-heading); font-size: 3.5rem; line-height: 1.2; margin: 0 0 1.5rem; color: #3A352C; font-weight: 400; letter-spacing: -0.01em;">
      Welcome Home,<br/>
      <span style="color: #6B6A45;">{{ snapshot.name.split()[0] if snapshot and snapshot.name else "Friend" }}</span>
    </h1>
    
    <p style="font-size: 1.05rem; line-height: 1.9; color: #3A352C; opacity: 0.8; margin-bottom: 2.5rem; font-weight: 300;">
      Your calm snapshot‚Äîvalue, equity, loan details, and gentle next steps all in one simple view. Everything you need to feel confident about your home's journey.
    </p>
    
    <a href="{{ url_for('homeowner_value_equity_overview') }}" style="display: inline-block; padding: 1rem 2.5rem; background: #6B6A45; color: white; text-decoration: none; font-size: 0.9rem; letter-spacing: 0.08em; text-transform: uppercase; transition: all 0.3s ease; font-weight: 500; border-radius: 0;">
      View Your Equity ‚Üí
    </a>
  </div>
</div>

<!-- In The Spotlight: Three Product Cards -->
<div style="margin-bottom: 5rem;">
  <h2 style="font-family: var(--font-heading); font-size: 2.5rem; text-align: center; margin-bottom: 3rem; color: #3A352C; font-weight: 400; letter-spacing: 0.01em;">
    In The Spotlight
  </h2>
  
  <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 3rem;">
    <!-- Card 1: Home Value -->
    <div style="background: white; text-align: center; transition: transform 0.3s ease;" onmouseover="this.style.transform='translateY(-8px)'" onmouseout="this.style.transform='translateY(0)'">
      <div style="aspect-ratio: 1; background: linear-gradient(135deg, #F6F2E8 0%, #EFE9DC 100%); margin-bottom: 1.5rem; display: flex; align-items: center; justify-content: center;">
        <div style="text-align: center;">
          <div style="font-size: 0.75rem; letter-spacing: 0.1em; text-transform: uppercase; color: #6B6A45; margin-bottom: 0.5rem; font-weight: 500;">Estimated Value</div>
          <div style="font-family: var(--font-heading); font-size: 2.5rem; color: #3A352C; font-weight: 400;">
            {% if snapshot and snapshot.value_estimate %}
              ${{ "{:,.0f}".format(snapshot.value_estimate) }}
            {% else %}
              ‚Äî
            {% endif %}
          </div>
        </div>
      </div>
      <h3 style="font-family: var(--font-heading); font-size: 1.3rem; margin: 0 0 0.5rem; color: #3A352C; font-weight: 400;">Home Value</h3>
      <p style="font-size: 0.85rem; color: #6B6A45; font-weight: 400;">Current estimate</p>
    </div>
    
    <!-- Card 2: Equity -->
    <div style="background: white; text-align: center; transition: transform 0.3s ease;" onmouseover="this.style.transform='translateY(-8px)'" onmouseout="this.style.transform='translateY(0)'">
      <div style="aspect-ratio: 1; background: linear-gradient(135deg, #F6F2E8 0%, #EFE9DC 100%); margin-bottom: 1.5rem; display: flex; align-items: center; justify-content: center;">
        <div style="text-align: center;">
          <div style="font-size: 0.75rem; letter-spacing: 0.1em; text-transform: uppercase; color: #6B6A45; margin-bottom: 0.5rem; font-weight: 500;">Your Equity</div>
          <div style="font-family: var(--font-heading); font-size: 2.5rem; color: #3A352C; font-weight: 400;">
            {% if snapshot and snapshot.equity_estimate %}
              ${{ "{:,.0f}".format(snapshot.equity_estimate) }}
            {% else %}
              ‚Äî
            {% endif %}
          </div>
        </div>
      </div>
      <h3 style="font-family: var(--font-heading); font-size: 1.3rem; margin: 0 0 0.5rem; color: #3A352C; font-weight: 400;">Equity Position</h3>
      <p style="font-size: 0.85rem; color: #6B6A45; font-weight: 400;">What you own</p>
    </div>
    
    <!-- Card 3: Loan -->
    <div style="background: white; text-align: center; transition: transform 0.3s ease;" onmouseover="this.style.transform='translateY(-8px)'" onmouseout="this.style.transform='translateY(0)'">
      <div style="aspect-ratio: 1; background: linear-gradient(135deg, #F6F2E8 0%, #EFE9DC 100%); margin-bottom: 1.5rem; display: flex; align-items: center; justify-content: center;">
        <div style="text-align: center; padding: 1.5rem;">
          <div style="margin-bottom: 1rem;">
            <div style="font-size: 0.7rem; letter-spacing: 0.1em; text-transform: uppercase; color: #6B6A45; font-weight: 500;">Rate</div>
            <div style="font-family: var(--font-heading); font-size: 1.5rem; color: #3A352C; font-weight: 400;">
              {% if snapshot and snapshot.loan_rate %}{{ "{:.2f}".format(snapshot.loan_rate) }}%{% else %}‚Äî{% endif %}
            </div>
          </div>
          <div>
            <div style="font-size: 0.7rem; letter-spacing: 0.1em; text-transform: uppercase; color: #6B6A45; font-weight: 500;">Payment</div>
            <div style="font-family: var(--font-heading); font-size: 1.3rem; color: #3A352C; font-weight: 400;">
              {% if snapshot and snapshot.loan_payment %}${{ "{:,.0f}".format(snapshot.loan_payment) }}{% else %}‚Äî{% endif %}
            </div>
          </div>
        </div>
      </div>
      <h3 style="font-family: var(--font-heading); font-size: 1.3rem; margin: 0 0 0.5rem; color: #3A352C; font-weight: 400;">Loan Snapshot</h3>
      <p style="font-size: 0.85rem; color: #6B6A45; font-weight: 400;">Current terms</p>
    </div>
  </div>
</div>

<!-- Eco Credentials Section: Two Column -->
<div style="background: #F6F2E8; margin: 0 -4rem 5rem; padding: 5rem 4rem;">
  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5rem; align-items: center; max-width: 1400px; margin: 0 auto;">
    <!-- Left: Text -->
    <div>
      <h2 style="font-family: var(--font-heading); font-size: 3rem; line-height: 1.3; margin: 0 0 2rem; color: #3A352C; font-weight: 400;">
        Your Home,<br/>
        Your Wealth Builder
      </h2>
      <p style="font-size: 1.1rem; line-height: 2; color: #3A352C; opacity: 0.75; font-weight: 300; margin-bottom: 2rem;">
        Every month, your equity grows. Every improvement adds value. Every decision shapes your future. We're here to help you see the full picture and make choices that feel right for your life.
      </p>
      <a href="{{ url_for('homeowner_next_pathways') }}" style="display: inline-block; padding: 1rem 2.5rem; border: 1px solid #6B6A45; color: #6B6A45; text-decoration: none; font-size: 0.85rem; letter-spacing: 0.08em; text-transform: uppercase; transition: all 0.3s ease; font-weight: 500;" onmouseover="this.style.background='#6B6A45'; this.style.color='white'" onmouseout="this.style.background='transparent'; this.style.color='#6B6A45'">
        Explore Next Steps ‚Üí
      </a>
    </div>
    
    <!-- Right: Image Placeholder -->
    <div style="aspect-ratio: 4/3; background: linear-gradient(135deg, #EFE9DC 0%, #D7C4A5 100%); display: flex; align-items: center; justify-content: center; color: #6B6A45; font-family: var(--font-heading); font-size: 1.2rem;">
      Lifestyle Interior
    </div>
  </div>
</div>

<!-- Suggested Next Steps -->
<div style="margin-bottom: 5rem;">
  <h2 style="font-family: var(--font-heading); font-size: 2.5rem; text-align: center; margin-bottom: 3rem; color: #3A352C; font-weight: 400; letter-spacing: 0.01em;">
    Suggested Next Steps
  </h2>
  
  <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem;">
    <div style="background: white; padding: 2.5rem 2rem; text-align: center; border: 1px solid rgba(200, 180, 151, 0.3);">
      <div style="font-size: 2.5rem; margin-bottom: 1rem;">üìä</div>
      <h3 style="font-family: var(--font-heading); font-size: 1.3rem; margin: 0 0 1rem; color: #3A352C; font-weight: 400;">Add Loan Details</h3>
      <p style="font-size: 0.95rem; line-height: 1.8; color: #3A352C; opacity: 0.7; font-weight: 300;">Complete your financial picture</p>
    </div>
    
    <div style="background: white; padding: 2.5rem 2rem; text-align: center; border: 1px solid rgba(200, 180, 151, 0.3);">
      <div style="font-size: 2.5rem; margin-bottom: 1rem;">üî®</div>
      <h3 style="font-family: var(--font-heading); font-size: 1.3rem; margin: 0 0 1rem; color: #3A352C; font-weight: 400;">Plan Renovations</h3>
      <p style="font-size: 0.95rem; line-height: 1.8; color: #3A352C; opacity: 0.7; font-weight: 300;">Organize your home improvement ideas</p>
    </div>
    
    <div style="background: white; padding: 2.5rem 2rem; text-align: center; border: 1px solid rgba(200, 180, 151, 0.3);">
      <div style="font-size: 2.5rem; margin-bottom: 1rem;">üè°</div>
      <h3 style="font-family: var(--font-heading); font-size: 1.3rem; margin: 0 0 1rem; color: #3A352C; font-weight: 400;">Plan Your Move</h3>
      <p style="font-size: 0.95rem; line-height: 1.8; color: #3A352C; opacity: 0.7; font-weight: 300;">Explore timing and options</p>
    </div>
  </div>
</div>

<!-- Quick Actions / Social Follow Section -->
<div style="background: #EFE9DC; margin: 0 -4rem; padding: 4rem 4rem; text-align: center;">
  <h2 style="font-family: var(--font-heading); font-size: 2rem; margin-bottom: 2.5rem; color: #3A352C; font-weight: 400;">
    Quick Actions
  </h2>
  
  <div style="display: flex; justify-content: center; gap: 1.5rem; flex-wrap: wrap;">
    <a href="{{ cloud_cma_url }}" target="_blank" rel="noopener" style="padding: 1rem 2rem; border: 1px solid #6B6A45; color: #6B6A45; text-decoration: none; font-size: 0.85rem; letter-spacing: 0.08em; text-transform: uppercase; transition: all 0.3s ease; font-weight: 500;" onmouseover="this.style.background='#6B6A45'; this.style.color='white'" onmouseout="this.style.background='transparent'; this.style.color='#6B6A45'">
      Pull Home Worth
    </a>
    <a href="{{ url_for('homeowner_reno_planner') }}" style="padding: 1rem 2rem; border: 1px solid #6B6A45; color: #6B6A45; text-decoration: none; font-size: 0.85rem; letter-spacing: 0.08em; text-transform: uppercase; transition: all 0.3s ease; font-weight: 500;" onmouseover="this.style.background='#6B6A45'; this.style.color='white'" onmouseout="this.style.background='transparent'; this.style.color='#6B6A45'">
      Start Renovation
    </a>
    <a href="{{ url_for('homeowner_next_plan_move') }}" style="padding: 1rem 2rem; border: 1px solid #6B6A45; color: #6B6A45; text-decoration: none; font-size: 0.85rem; letter-spacing: 0.08em; text-transform: uppercase; transition: all 0.3s ease; font-weight: 500;" onmouseover="this.style.background='#6B6A45'; this.style.color='white'" onmouseout="this.style.background='transparent'; this.style.color='#6B6A45'">
      Plan My Move
    </a>
  </div>
</div>
{% endblock %}
