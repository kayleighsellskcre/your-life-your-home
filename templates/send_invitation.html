{% extends "base.html" %}

{% block title %}Send Invitation - {{ brand_name }}{% endblock %}

{% block content %}
<div style="max-width: 700px; margin: 3rem auto; padding: 2.5rem; background: white; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
    <h1 style="font-size: 2rem; color: #2C3E50; margin-bottom: 0.5rem;">
        Send Invitation
    </h1>
    <p style="color: #666; margin-bottom: 2rem;">
        Invite someone to collaborate on this transaction or become your client.
    </p>
    
    <form method="POST" action="/invite">
        {% if transaction_id %}
        <input type="hidden" name="transaction_id" value="{{ transaction_id }}">
        {% endif %}
        
        <div style="margin-bottom: 1.5rem;">
            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #2C3E50;">
                Email Address *
            </label>
            <input type="email" 
                   name="invited_email" 
                   required
                   placeholder="colleague@example.com"
                   style="width: 100%; padding: 0.875rem; border: 2px solid #ddd; border-radius: 8px; 
                          font-size: 1rem;">
        </div>
        
        <div style="margin-bottom: 1.5rem;">
            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #2C3E50;">
                Role *
            </label>
            <select name="invited_role" 
                    id="invitedRole"
                    onchange="toggleCustomRole()"
                    style="width: 100%; padding: 0.875rem; border: 2px solid #ddd; border-radius: 8px; 
                           font-size: 1rem;">
                <option value="homeowner">Homeowner/Client</option>
                <option value="agent">Real Estate Agent</option>
                <option value="lender">Lender/Loan Officer</option>
                <option value="other_agent">Other Agent (Buyer's/Seller's)</option>
                <option value="transaction_coordinator">Transaction Coordinator</option>
                <option value="title_company">Title Company</option>
                <option value="inspector">Home Inspector</option>
                <option value="appraiser">Appraiser</option>
                <option value="attorney">Attorney</option>
                <option value="custom">Custom Role...</option>
            </select>
        </div>
        
        <div id="customRoleDiv" style="margin-bottom: 1.5rem; display: none;">
            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #2C3E50;">
                Custom Role Name
            </label>
            <input type="text" 
                   name="custom_role_name" 
                   id="customRoleName"
                   placeholder="e.g., Mortgage Broker, Contractor"
                   style="width: 100%; padding: 0.875rem; border: 2px solid #ddd; border-radius: 8px; 
                          font-size: 1rem;">
        </div>
        
        <div style="margin-bottom: 2rem;">
            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #2C3E50;">
                Personal Message (Optional)
            </label>
            <textarea name="message" 
                      rows="4"
                      placeholder="Add a personal note to your invitation..."
                      style="width: 100%; padding: 0.875rem; border: 2px solid #ddd; border-radius: 8px; 
                             font-size: 1rem; resize: vertical;"></textarea>
        </div>
        
        <div style="display: flex; gap: 1rem; justify-content: flex-end;">
            <a href="{{ request.referrer or url_for('index') }}" 
               style="padding: 0.875rem 1.5rem; border: 2px solid #ddd; border-radius: 8px; 
                      text-decoration: none; color: #666; font-weight: 600;">
                Cancel
            </a>
            <button type="submit"
                    style="padding: 0.875rem 2rem; background: #8B7355; color: white; border: none; 
                           border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer;">
                Send Invitation
            </button>
        </div>
    </form>
</div>

<script>
function toggleCustomRole() {
    const select = document.getElementById('invitedRole');
    const customDiv = document.getElementById('customRoleDiv');
    const customInput = document.getElementById('customRoleName');
    
    if (select.value === 'custom') {
        customDiv.style.display = 'block';
        customInput.required = true;
    } else {
        customDiv.style.display = 'none';
        customInput.required = false;
    }
}
</script>
{% endblock %}
